<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Healthcare Courier Assessment</title>
<style>
  :root{
    --brand: #0b8c99;
    --brand-dark: #08767a;
    --bg: #f6f8f9;
    --card: #ffffff;
    --muted: #6b7280;
    --radius: 12px;
    --shadow: 0 8px 30px rgba(11,140,153,0.06);
    --base-font: 18px;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;color:#0f172a}
  body{display:flex;align-items:center;justify-content:center;padding:20px;font-size:var(--base-font)}
  .wrap{width:100%;max-width:980px}
  .card{background:var(--card);border-radius:16px;box-shadow:var(--shadow);overflow:hidden;border:1px solid rgba(11,140,153,0.06)}
  header.top{padding:28px 28px 14px;display:flex;flex-direction:column;gap:8px}
  header .title{font-size:22px;font-weight:700;color:var(--brand-dark)}
  header .subtitle{font-size:15px;color:var(--muted)}
  .confirm{background:linear-gradient(90deg,rgba(11,140,153,0.06),rgba(11,140,153,0.02));padding:10px;border-radius:10px;display:flex;gap:12px;align-items:center}
  .confirm .emoji{font-size:20px}
  .body{display:grid;grid-template-columns:320px 1fr;gap:20px;padding:20px}
  .sidebar{padding-right:6px}
  .progress-wrap{background:linear-gradient(180deg,#fbfdfe,#fff);padding:12px;border-radius:12px;border:1px solid rgba(2,6,23,0.03)}
  .progress-label{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;font-size:13px;color:var(--muted)}
  .progress{height:10px;background:rgba(2,6,23,0.06);border-radius:999px;overflow:hidden}
  .progress > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--brand),var(--brand-dark));transition:width .35s cubic-bezier(.22,.9,.27,1)}
  .hint{font-size:13px;color:var(--muted);margin-top:12px;line-height:1.45}
  form{padding:0}
  .steps{min-height:440px}
  .step{display:none;animation:fadeIn .26s ease both}
  .step.active{display:block}
  @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
  h2{margin:0 0 12px;font-size:18px}
  label{display:block;font-weight:600;margin-bottom:6px;font-size:15px}
  .optional{font-weight:500;color:var(--muted);font-size:13px;margin-left:8px}
  input[type="text"], input[type="number"], input[type="email"], textarea, select{
    width:100%;padding:12px 14px;border-radius:10px;border:1px solid rgba(15,23,42,0.06);font-size:15px;background:linear-gradient(180deg,#fff,#fbfeff);outline:none;margin-bottom:14px;
  }
  textarea{min-height:110px;resize:vertical}
  .checkbox-group, .radio-group{margin-bottom:14px}
  .checkbox-group label, .radio-group label{display:flex;align-items:center;gap:10px;font-weight:500;color:#0f172a}
  .small{font-size:13px;color:var(--muted)}
  .controls{display:flex;gap:12px;align-items:center;justify-content:flex-end;padding:18px;border-top:1px solid rgba(2,6,23,0.03);background:linear-gradient(180deg,#fff,#fbfeff)}
  .btn{padding:11px 16px;border-radius:10px;border:0;cursor:pointer;font-weight:700;font-size:15px}
  .btn.ghost{background:transparent;color:var(--brand);border:1px solid rgba(11,140,153,0.12)}
  .btn.primary{background:var(--brand);color:#fff;box-shadow:0 8px 20px rgba(11,140,153,0.12)}
  .btn[disabled]{opacity:.6;cursor:not-allowed}
  .sticky-actions{position:sticky;bottom:0;background:linear-gradient(180deg,transparent,rgba(255,255,255,0.95));padding-top:10px}
  .errors{color:#b91c1c;font-size:13px;margin-top:-8px;margin-bottom:8px}
  .success-screen{display:none;position:fixed;inset:0;background:rgba(3,7,18,0.6);align-items:center;justify-content:center;z-index:9999}
  .success-screen .card{max-width:720px;padding:28px;text-align:center}
  .step-counter{font-size:13px;color:var(--muted);margin-bottom:8px}

  /* Responsive */
  @media (max-width:880px){
    .body{grid-template-columns:1fr;gap:12px}
    .sidebar{order:2}
    .controls{position:fixed;left:0;right:0;bottom:0;padding:14px 20px;background:linear-gradient(180deg,#fff,rgba(255,255,255,0.96));z-index:999}
    .wrap{padding-bottom:110px}
  }
</style>
</head>
<body>
<div class="wrap">
  <div class="card" role="application" aria-labelledby="formTitle">
    <header class="top">
      <div class="confirm">
        <div class="emoji" aria-hidden="true">ðŸŽ‰</div>
        <div>
          <div style="font-weight:700;color:var(--brand-dark)">Thanks for booking an appointment with me</div>
          <div class="small">Weâ€™ll tailor your logistics solution. Name & email are required â€” the rest are optional.</div>
        </div>
      </div>
      <div style="margin-top:8px">
        <div id="formTitle" class="title">Healthcare Courier Assessment</div>
        <div class="subtitle">Answer a few quick questions so we can propose a compliant, cost-efficient delivery plan. â‰ˆ 3â€“5 minutes.</div>
      </div>
    </header>

    <div class="body">
      <aside class="sidebar" aria-hidden="false">
        <div class="progress-wrap">
          <div class="progress-label">
            <div style="font-weight:700">Progress</div>
            <div id="stepCounter" class="small">Step 1 of 8</div>
          </div>
          <div class="progress" aria-hidden="true"><i id="progressBar"></i></div>
          <div class="hint" style="margin-top:12px">
            <div style="font-weight:700;margin-bottom:6px">Quick tips</div>
            <ul style="margin:0;padding-left:18px;color:var(--muted);line-height:1.6">
              <li>Only name & email are required.</li>
              <li>You can skip optional fields and return later.</li>
              <li>Answers are sent securely to our team for scoping.</li>
            </ul>
          </div>
        </div>
      </aside>

      <main style="padding-left:0;">
        <form id="assessmentForm" novalidate>
          <div class="steps">
            <!-- STEP 1 -->
            <section class="step active" data-step="1" aria-labelledby="step1Title">
              <div class="step-counter">Step 1 of 8</div>
              <h2 id="step1Title">1 â€” General Company Profile</h2>

              <label for="name">Full name <span class="small" aria-hidden="true">*</span></label>
              <input id="name" name="name" type="text" autocomplete="name" required />
              <div id="err-name" class="errors" aria-live="polite"></div>

              <label for="email">Email <span class="small" aria-hidden="true">*</span></label>
              <input id="email" name="email" type="email" autocomplete="email" required />
              <div id="err-email" class="errors" aria-live="polite"></div>

              <label for="products">What type of pharmaceuticals and medical products will require delivery? <span class="optional">Optional</span></label>
              <textarea id="products" name="products" placeholder="e.g., vaccines, biologics, controlled substances (if any)"></textarea>

              <label for="process">What is your current delivery process, and what challenges are you facing with your existing courier partner? <span class="optional">Optional</span></label>
              <textarea id="process" name="process" placeholder="Describe current flow & pain points"></textarea>

              <label for="volumes">Average daily / weekly / monthly delivery volumes expected? <span class="optional">Optional</span></label>
              <input id="volumes" name="volumes" type="number" min="0" placeholder="e.g., 25 per day or 500 per month" />
            </section>

            <!-- STEP 2 -->
            <section class="step" data-step="2" aria-labelledby="step2Title">
              <div class="step-counter">Step 2 of 8</div>
              <h2 id="step2Title">2 â€” Service Expectations</h2>

              <label>Service-level requirements (choose one)</label>
              <div class="radio-group" role="radiogroup" aria-labelledby="slaGroup">
                <label><input type="radio" name="sla" value="STAT within 2 hours"> STAT within 2 hours</label>
                <label><input type="radio" name="sla" value="Same-day"> Same-day</label>
                <label><input type="radio" name="sla" value="Next-day"> Next-day</label>
              </div>

              <label>Do you require scheduled routes, on-demand/STAT services, or both? <span class="optional">Optional</span></label>
              <div class="checkbox-group">
                <label><input type="checkbox" name="serviceTypes" value="Scheduled routes"> Scheduled routes</label>
                <label><input type="checkbox" name="serviceTypes" value="On-demand/STAT"> On-demand/STAT</label>
                <label><input type="checkbox" name="serviceTypes" value="Both"> Both</label>
              </div>

              <label>What geographic coverage do you need? <span class="optional">Optional</span></label>
              <div class="checkbox-group">
                <label><input type="checkbox" name="geography" value="Local"> Local</label>
                <label><input type="checkbox" name="geography" value="Statewide"> Statewide</label>
                <label><input type="checkbox" name="geography" value="Multi-state"> Multi-state</label>
              </div>

              <label>Do you need 24/7/365 availability, including weekends and holidays?</label>
              <div class="radio-group">
                <label><input type="radio" name="availability247" value="Yes"> Yes</label>
                <label><input type="radio" name="availability247" value="No"> No</label>
              </div>
            </section>

            <!-- STEP 3 -->
            <section class="step" data-step="3" aria-labelledby="step3Title">
              <div class="step-counter">Step 3 of 8</div>
              <h2 id="step3Title">3 â€” Compliance & Regulatory Requirements</h2>

              <label>Are any deliveries classified as Schedule IIâ€“V controlled substances requiring DEA compliance?</label>
              <div class="radio-group">
                <label><input type="radio" name="controlledSubstances" value="Yes"> Yes</label>
                <label><input type="radio" name="controlledSubstances" value="No"> No</label>
              </div>

              <label>Do your shipments include temperature-sensitive medications? <span class="optional">Optional</span></label>
              <div class="radio-group">
                <label><input type="radio" name="tempSensitiveFlag" value="Yes"> Yes</label>
                <label><input type="radio" name="tempSensitiveFlag" value="No"> No</label>
              </div>
              <input type="text" name="tempRanges" placeholder="If yes, what ranges? e.g., 2â€“8Â°C; -20Â°C" />

              <label>What documentation/permits/regulatory checks are required? <span class="optional">Optional</span></label>
              <div class="checkbox-group">
                <label><input type="checkbox" name="documentation" value="HIPAA"> HIPAA</label>
                <label><input type="checkbox" name="documentation" value="DOT"> DOT</label>
                <label><input type="checkbox" name="documentation" value="OSHA"> OSHA</label>
                <label><input type="checkbox" name="documentation" value="DEA chain-of-custody"> DEA chain-of-custody</label>
              </div>
              <textarea name="documentationOther" placeholder="Other documentation or notes (optional)"></textarea>

              <label>Do you require background checks / fingerprinting / special security clearances for couriers?</label>
              <div class="radio-group">
                <label><input type="radio" name="securityClearances" value="Yes"> Yes</label>
                <label><input type="radio" name="securityClearances" value="No"> No</label>
              </div>
            </section>

            <!-- STEP 4 -->
            <section class="step" data-step="4" aria-labelledby="step4Title">
              <div class="step-counter">Step 4 of 8</div>
              <h2 id="step4Title">4 â€” Packaging & Handling</h2>

              <label>Do you provide packaging/labels, or should the courier supply these?</label>
              <select name="packagingSource" aria-label="Packaging source">
                <option value="">(choose)</option>
                <option value="Company provides">Company provides</option>
                <option value="Courier supplies">Courier supplies</option>
                <option value="Both">Both</option>
              </select>

              <label>Are there specific chain-of-custody protocols to follow at pickup and delivery? <span class="optional">Optional</span></label>
              <textarea name="chainOfCustody" placeholder="Describe protocols (optional)"></textarea>

              <label>Do deliveries involve hazardous materials or specialty handling?</label>
              <div class="radio-group">
                <label><input type="radio" name="hazmatFlag" value="Yes"> Yes</label>
                <label><input type="radio" name="hazmatFlag" value="No"> No</label>
              </div>
              <textarea name="hazmatDetails" placeholder="If yes, explain (optional)"></textarea>
            </section>

            <!-- STEP 5 -->
            <section class="step" data-step="5" aria-labelledby="step5Title">
              <div class="step-counter">Step 5 of 8</div>
              <h2 id="step5Title">5 â€” Technology & Tracking</h2>

              <label>What level of visibility do you require? <span class="optional">Optional</span></label>
              <div class="checkbox-group">
                <label><input type="checkbox" name="visibility" value="GPS tracking"> GPS tracking</label>
                <label><input type="checkbox" name="visibility" value="Proof of Delivery"> Proof of Delivery</label>
                <label><input type="checkbox" name="visibility" value="Client portal"> Client portal</label>
              </div>

              <label>Do you require integration with your pharmacy management or EHR system?</label>
              <div class="radio-group">
                <label><input type="radio" name="ehrIntegrationFlag" value="Yes"> Yes</label>
                <label><input type="radio" name="ehrIntegrationFlag" value="No"> No</label>
              </div>
              <input type="text" name="ehrSystem" placeholder="If yes, specify system (optional)" />

              <label>Should confirmations include e-signatures, timestamps, temperature logs, or photo verification? <span class="optional">Optional</span></label>
              <div class="checkbox-group">
                <label><input type="checkbox" name="confirmations" value="E-signatures"> E-signatures</label>
                <label><input type="checkbox" name="confirmations" value="Timestamps"> Timestamps</label>
                <label><input type="checkbox" name="confirmations" value="Temperature logs"> Temperature logs</label>
                <label><input type="checkbox" name="confirmations" value="Photo verification"> Photo verification</label>
              </div>
            </section>

            <!-- STEP 6 -->
            <section class="step" data-step="6" aria-labelledby="step6Title">
              <div class="step-counter">Step 6 of 8</div>
              <h2 id="step6Title">6 â€” Security & Risk Management</h2>

              <label>Do you require tamper-evident seals, locked bags, or secure vault storage during transport? <span class="optional">Optional</span></label>
              <div class="checkbox-group">
                <label><input type="checkbox" name="securityMaterials" value="Tamper-evident seals"> Tamper-evident seals</label>
                <label><input type="checkbox" name="securityMaterials" value="Locked bags"> Locked bags</label>
                <label><input type="checkbox" name="securityMaterials" value="Secure vault storage"> Secure vault storage</label>
              </div>

              <label for="insuranceRequirement">What is your insurance requirement for cargo (per shipment value)? <span class="optional">Optional</span></label>
              <input id="insuranceRequirement" name="insuranceRequirement" type="number" min="0" placeholder="e.g., 50000" />

              <label>How should incidents (delays, damages, lost packages) be handled and reported? <span class="optional">Optional</span></label>
              <textarea name="incidentHandling" placeholder="Describe incident reporting process"></textarea>
            </section>

            <!-- STEP 7 -->
            <section class="step" data-step="7" aria-labelledby="step7Title">
              <div class="step-counter">Step 7 of 8</div>
              <h2 id="step7Title">7 â€” Communication & Relationship</h2>

              <label>Preferred method of communication (choose any) <span class="optional">Optional</span></label>
              <div class="checkbox-group">
                <label><input type="checkbox" name="preferredChannels" value="Dispatch line"> Dispatch line</label>
                <label><input type="checkbox" name="preferredChannels" value="Email"> Email</label>
                <label><input type="checkbox" name="preferredChannels" value="Portal alerts"> Portal alerts</label>
                <label><input type="checkbox" name="preferredChannels" value="SMS"> SMS</label>
              </div>

              <label>Do you require a dedicated account manager or direct contact with dispatch?</label>
              <div class="radio-group">
                <label><input type="radio" name="dedicatedManager" value="Yes"> Yes</label>
                <label><input type="radio" name="dedicatedManager" value="No"> No</label>
              </div>

              <label>How frequently would you like service reviews / performance reports?</label>
              <select name="reviewFrequency">
                <option value="">(choose)</option>
                <option value="Weekly">Weekly</option>
                <option value="Monthly">Monthly</option>
                <option value="Quarterly">Quarterly</option>
                <option value="Annually">Annually</option>
              </select>
            </section>

            <!-- STEP 8 -->
            <section class="step" data-step="8" aria-labelledby="step8Title">
              <div class="step-counter">Step 8 of 8</div>
              <h2 id="step8Title">8 â€” Contract & Pricing</h2>

              <label>Do you prefer per-trip, per-mile, per-route, or flat monthly contract pricing?</label>
              <select name="pricingModel">
                <option value="">(choose)</option>
                <option value="Per-trip">Per-trip</option>
                <option value="Per-mile">Per-mile</option>
                <option value="Per-route">Per-route</option>
                <option value="Flat monthly">Flat monthly</option>
              </select>

              <label>Will there be seasonal fluctuations or surge delivery periods to prepare for?</label>
              <div class="radio-group">
                <label><input type="radio" name="seasonalSurgeFlag" value="Yes"> Yes</label>
                <label><input type="radio" name="seasonalSurgeFlag" value="No"> No</label>
              </div>
              <textarea name="seasonalSurgeDetails" placeholder="If yes, explain (optional)"></textarea>

              <label>What KPIs matter most? <span class="optional">Optional</span></label>
              <div class="checkbox-group">
                <label><input type="checkbox" name="kpis" value="On-time %"> On-time %</label>
                <label><input type="checkbox" name="kpis" value="Temperature compliance"> Temperature compliance</label>
                <label><input type="checkbox" name="kpis" value="Accuracy rate"> Accuracy rate</label>
              </div>
            </section>
          </div>

          <div class="sticky-actions" aria-hidden="false">
            <div class="controls">
              <button type="button" id="prevBtn" class="btn ghost" aria-label="Previous step">Previous</button>
              <div style="flex:0 0 12px"></div>
              <button type="button" id="nextBtn" class="btn primary" aria-label="Next step">Next</button>
            </div>
          </div>
        </form>
      </main>
    </div>
  </div>
</div>

<!-- Success overlay -->
<div id="successOverlay" class="success-screen" role="dialog" aria-modal="true" aria-labelledby="successTitle">
  <div class="card" style="padding:28px;max-width:720px">
    <div style="font-size:46px">âœ…</div>
    <h2 id="successTitle" style="margin-top:10px">Appointment confirmed â€” thanks!</h2>
    <p class="small" style="margin-top:8px;color:var(--muted)">We received your assessment. Expect a personalised proposal and follow-up email within 1 business day.</p>
    <div style="margin-top:18px;display:flex;gap:12px;justify-content:center">
      <button id="restartBtn" class="btn ghost">Start over</button>
      <button id="closeBtn" class="btn primary">Close</button>
    </div>
  </div>
</div>

<!-- confetti CDN -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

<script>
/* ====== CONFIG ====== */
const WEBHOOK_URL = 'https://hook.us2.make.com/t6klvz5sg4pq12hysqs7xbbdhhtz5rxt';
/* ====== END CONFIG ====== */

/* Utility */
const el = id => document.getElementById(id);
const q = sel => document.querySelector(sel);
const qs = sel => Array.from(document.querySelectorAll(sel));

/* Confetti â€” only once per session */
function launchConfetti(){
  try{
    if (sessionStorage.getItem('confettiShown')) return;
    sessionStorage.setItem('confettiShown','1');
    const duration = 3500;
    const end = Date.now() + duration;
    (function frame(){
      confetti({ particleCount: 28, spread: 120, origin: { x: 0.5, y: 0.2 }, gravity: 0.7 });
      if (Date.now() < end) requestAnimationFrame(frame);
    })();
  } catch(e){
    /* noop */
  }
}

/* Steps */
const steps = qs('.step');
const totalSteps = steps.length;
let currentStep = 0;

const prevBtn = el('prevBtn');
const nextBtn = el('nextBtn');
const progressBar = el('progressBar');
const stepCounter = el('stepCounter');
const form = el('assessmentForm');
const successOverlay = el('successOverlay');

function showStep(index){
  if(index < 0) index = 0;
  if(index >= totalSteps) index = totalSteps - 1;
  currentStep = index;
  steps.forEach((s,i)=> {
    s.classList.toggle('active', i === currentStep);
    s.setAttribute('aria-hidden', i === currentStep ? 'false' : 'true');
  });
  prevBtn.style.display = currentStep === 0 ? 'none' : 'inline-block';
  nextBtn.textContent = currentStep === totalSteps - 1 ? 'Submit' : 'Next';
  const pct = Math.round(((currentStep) / (totalSteps - 1)) * 100);
  progressBar.style.width = pct + '%';
  stepCounter.textContent = `Step ${currentStep + 1} of ${totalSteps}`;
  // focus first control for accessibility
  const first = steps[currentStep].querySelector('input,textarea,select');
  if(first) first.focus();
}

/* Basic validation for step 1 (name + email required) */
function validateStep(index){
  if(index === 0){
    const name = form.querySelector('[name="name"]').value.trim();
    const email = form.querySelector('[name="email"]').value.trim();
    let ok = true;
    el('err-name').textContent = '';
    el('err-email').textContent = '';
    if(!name){
      el('err-name').textContent = 'Please enter your name';
      ok = false;
    }
    if(!email){
      el('err-email').textContent = 'Please enter your email';
      ok = false;
    } else {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if(!re.test(email)){
        el('err-email').textContent = 'Please enter a valid email';
        ok = false;
      }
    }
    return ok;
  }
  // other steps have no required fields
  return true;
}

/* Collect form data into structured object.
   Aggregates repeated keys (checkbox groups) into arrays.
*/
function collectFormData(){
  const fd = new FormData(form);
  const data = { source: 'healthcare-courier-assessment', timestamp: new Date().toISOString() };
  for(const [key, value] of fd.entries()){
    if(Object.prototype.hasOwnProperty.call(data, key)){
      // if property exists and is not array, convert to array
      if(!Array.isArray(data[key])){
        data[key] = [data[key]];
      }
      data[key].push(value);
    } else {
      data[key] = value;
    }
  }
  return data;
}

/* Submit */
async function submitForm(){
  // final validation (step 1 required)
  if(!validateStep(0)){
    showStep(0);
    return;
  }
  const payload = collectFormData();
  try{
    nextBtn.disabled = true;
    nextBtn.textContent = 'Submitting...';
    const res = await fetch(WEBHOOK_URL, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(payload),
      keepalive: true
    });
    if(!res.ok){
      throw new Error('Network error');
    }
    // success UI
    successOverlay.style.display = 'flex';
    // subtle confetti finish
    try{ confetti({ particleCount: 60, spread: 160, origin: { y: 0.25 } }); }catch(e){}
  }catch(err){
    alert('Submission failed â€” please try again.');
    nextBtn.disabled = false;
    nextBtn.textContent = 'Submit';
  }
}

/* Events */
prevBtn.addEventListener('click', ()=>{
  showStep(currentStep - 1);
});

nextBtn.addEventListener('click', ()=>{
  if(currentStep < totalSteps - 1){
    // validate current step if necessary
    if(!validateStep(currentStep)) return;
    showStep(currentStep + 1);
    // save partial in sessionStorage (optional)
    try{
      sessionStorage.setItem('hc_assessment_draft', JSON.stringify(collectFormData()));
    }catch(e){}
  } else {
    // submit
    submitForm();
  }
});

/* Keyboard: Enter moves to next (unless inside textarea) */
form.addEventListener('keydown', (e)=>{
  if(e.key === 'Enter' && e.target.tagName !== 'TEXTAREA'){
    e.preventDefault();
    // try to move forward
    if(currentStep < totalSteps - 1){
      if(!validateStep(currentStep)) return;
      showStep(currentStep + 1);
    } else {
      submitForm();
    }
  }
});

/* Load saved draft (if any) â€” and restore values */
function restoreDraft(){
  try{
    const raw = sessionStorage.getItem('hc_assessment_draft');
    if(!raw) return;
    const saved = JSON.parse(raw);
    Object.entries(saved).forEach(([k,v])=>{
      // skip metadata
      if(k === 'source' || k === 'timestamp') return;
      const els = form.querySelectorAll(`[name="${k}"]`);
      if(!els || els.length === 0) return;
      // if multiple elements (checkboxes with same name)
      if(els.length > 1){
        // ensure we have array
        const values = Array.isArray(v) ? v : [v];
        els.forEach(elm=>{
          elm.checked = values.includes(elm.value);
        });
      } else {
        const elSingle = els[0];
        if(elSingle.type === 'checkbox' || elSingle.type === 'radio'){
          elSingle.checked = !!v;
        } else {
          elSingle.value = v;
        }
      }
    });
  }catch(e){}
}

/* Success overlay controls */
el('restartBtn').addEventListener('click', ()=>{
  // clear form & session
  form.reset();
  try{ sessionStorage.removeItem('hc_assessment_draft'); }catch(e){}
  successOverlay.style.display = 'none';
  showStep(0);
  nextBtn.disabled = false; nextBtn.textContent = 'Next';
});
el('closeBtn').addEventListener('click', ()=>{
  successOverlay.style.display = 'none';
});

/* Init */
document.addEventListener('DOMContentLoaded', ()=>{
  launchConfetti();
  restoreDraft();
  showStep(0);
});
</script>
</body>
</html>
