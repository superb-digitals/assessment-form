<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Healthcare Courier Assessment</title>
<style>
  :root {
    --brand: #0b8c99;
    --brand-dark: #066a6f;
    --bg: #f6f8f9;
    --card: #ffffff;
    --muted: #6b7280;
    --text: #071323;
    --radius: 14px;
    --gap: 14px;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    font-size: 16px;
  }

  * { box-sizing: border-box }

  body {
    margin: 0;
    background: var(--bg);
    color: var(--text);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    padding: 28px;
    min-height: 100vh;
  }

  /* Card */
  .card {
    width: 100%;
    max-width: 980px;
    background: var(--card);
    border-radius: 18px;
    box-shadow: 0 12px 36px rgba(4, 8, 15, 0.06);
    overflow: hidden;
    border: 1px solid rgba(7, 19, 35, 0.04);
  }

  /* Header */
  .header {
    padding: 26px 28px;
    display: flex;
    justify-content: space-between;
    gap: 12px;
    background: linear-gradient(180deg, rgba(11, 140, 153, 0.03), rgba(255, 255, 255, 0));
    align-items: flex-start;
  }

  .title-wrap { flex: 1; }

  .title {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .title h1 { margin: 0; font-size: 20px; letter-spacing: -0.2px; }
  .subtitle { margin: 8px 0 0; color: var(--muted); font-size: 14px; }

  /* Step counter */
  .step-counter {
    font-size: 14px;
    color: var(--muted);
    min-width: 120px;
    text-align: right;
  }

  /* Main */
  .main { padding: 22px 28px 120px; position: relative }
  .progress-row {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 18px;
    justify-content: space-between;
  }
  .prog-wrap {
    flex: 1;
    margin-right: 12px;
    height: 10px;
    background: #eef2f4;
    border-radius: 999px;
    overflow: hidden;
  }
  .prog-bar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, var(--brand), var(--brand-dark));
    transition: width .34s cubic-bezier(.22,.9,.27,1);
  }
  .prog-percent { color: var(--muted); font-size: 13px; min-width: 40px; text-align: right }

  form { width: 100% }

  .step { display: none; animation: fadeIn .28s cubic-bezier(.22,.9,.27,1) both }
  .step.active { display: block }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px) }
    to { opacity: 1; transform: none }
  }

  /* Section header */
  .section-head {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
  }
  .section-head .icon {
    width: 36px; height: 36px;
    display: inline-flex; align-items: center; justify-content: center;
    border-radius: 9px;
    background: linear-gradient(180deg, rgba(11, 140, 153, 0.12), rgba(11, 140, 153, 0.06));
    flex: 0 0 36px;
  }
  .section-head h2 { margin: 0; font-size: 17px; letter-spacing: -0.2px }

  .field { margin-bottom: 14px }
  label.field-label { display: block; font-weight: 700; margin-bottom: 8px; font-size: 14px }
  .hint { font-size: 13px; color: var(--muted); margin-top: 6px }

  /* Inputs with icons */
  .input-wrap { position: relative }
  .input-icon {
    position: absolute; top: 50%; right: 12px; transform: translateY(-50%);
    width: 20px; height: 20px; opacity: 0.9;
    display: flex; align-items: center; justify-content: center;
    pointer-events: none;
  }
  input[type="text"], input[type="email"], input[type="number"], textarea, select {
    width: 100%; padding: 12px 44px 12px 14px;
    border-radius: 12px;
    border: 1px solid rgba(7,19,35,0.06);
    background: linear-gradient(180deg,#fff,#fbfdff);
    font-size: 15px; color: var(--text); outline: none;
    transition: box-shadow .12s ease, transform .08s ease, border-color .12s ease;
  }
  textarea { padding: 12px 14px; min-height: 120px; resize: vertical }

  input:focus, textarea:focus, select:focus {
    box-shadow: 0 10px 30px rgba(11,140,153,0.08);
    transform: translateY(-1px);
    border-color: rgba(11,140,153,0.18);
  }

  /* Options - checkboxes & radios displayed as cards */
  .options { display: flex; flex-wrap: wrap; gap: 10px }
  .option {
    display: flex; align-items: center; gap: 10px;
    padding: 10px 12px; border-radius: 12px;
    border: 1px solid rgba(7,19,35,0.06);
    background: linear-gradient(180deg,#fff,#fcfeff);
    font-size: 14px; cursor: pointer;
  }
  .option input {
    margin: 0; width: 18px; height: 18px; flex: 0 0 18px;
    cursor: pointer;
  }
  .option:hover { box-shadow: 0 8px 20px rgba(2,6,23,0.04) }

  /* Toggle pills (Yes/No) */
  .pills { display: flex; gap: 10px; flex-wrap: wrap }
  .pill {
    padding: 8px 14px; border-radius: 999px;
    border: 1px solid rgba(7,19,35,0.06);
    cursor: pointer; font-size: 14px;
  }
  .pill input { display: none }
  .pill.active { background: var(--brand); color: #fff; border-color: var(--brand) }

  /* Sticky footer actions */
  .footer {
    position: sticky; bottom: 0;
    background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,1));
    display: flex; gap: 12px; padding: 16px 18px;
    border-top: 1px solid rgba(7,19,35,0.03);
    align-items: center; justify-content: space-between;
  }
  .actions-left { display: flex; gap: 12px; align-items: center }

  button.btn {
    border: 0; padding: 10px 14px; border-radius: 12px;
    font-weight: 700; font-size: 15px; cursor: pointer;
  }
  button.ghost {
    background: transparent;
    border: 1px solid rgba(7,19,35,0.06);
    color: var(--brand);
  }
  button.primary {
    background: var(--brand); color: #fff;
    box-shadow: 0 10px 28px rgba(11,140,153,0.08);
  }
  button[disabled] { opacity: 0.6; cursor: not-allowed }

  /* Small text */
  .small-muted { font-size: 13px; color: var(--muted) }

  /* Success overlay */
  .overlay {
    position: fixed; inset: 0; display: none;
    align-items: center; justify-content: center;
    background: rgba(2,6,23,0.45); z-index: 9998;
  }
  .overlay.active { display: flex }
  .success-card {
    background: var(--card); padding: 28px;
    border-radius: 14px; text-align: center;
    max-width: 720px; width: 92%;
  }
  .success-card h3 { margin: 8px 0 6px; font-size: 20px }
  .success-card p { color: var(--muted); margin: 0 0 12px }

  /* Toasts small */
  .toasts {
    position: fixed; right: 18px; bottom: 18px;
    display: flex; flex-direction: column; gap: 10px;
    z-index: 9999;
  }
  .toast {
    background: var(--brand); color: #fff;
    padding: 10px 14px; border-radius: 8px;
    box-shadow: 0 6px 18px rgba(2,6,23,0.12);
  }

  /* Responsive */
  @media (max-width: 880px) {
    .header {
      padding: 18px;
      flex-direction: column;
      gap: 10px;
      align-items: flex-start;
    }

    .main { padding: 18px 18px 120px }

    .section-head h2 { font-size: 16px }

    .overlay { padding: 16px }

    /* Keep footer horizontal on small screens */
    .footer {
      flex-direction: row;
      gap: 10px;
      align-items: center;
      justify-content: space-between;
      padding: 12px;
    }

    .actions-left {
      display: flex;
      gap: 10px;
      align-items: center;
      flex: 1;
    }

    .actions-left .small-muted { display: none }

    .footer > div:last-child { flex: 0 0 auto }
  }

  /* Align Previous left & Next right */
  .buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 25px;
    width: 100%;
  }

  .buttons button {
    padding: 12px 22px;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    cursor: pointer;
    transition: background 0.3s ease, transform 0.2s ease;
  }

  .buttons button:hover { transform: translateY(-2px) }
  .buttons .prev { background: #ccc; color: #333 }
  .buttons .next { background: var(--brand); color: #fff }
</style>
</head>
<body>
  <div class="card" role="application" aria-labelledby="formTitle">
    <header class="header">
      <div class="title-wrap">
        <div class="title">
          <!-- main SVG logo icon -->
          <div style="width:44px;height:44px;border-radius:10px;background:linear-gradient(180deg,var(--brand),var(--brand-dark));display:inline-flex;align-items:center;justify-content:center;color:#fff;font-weight:700">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false"><path d="M3 7h18M3 12h14M3 17h10" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>

          <div>
            <h1 id="formTitle">Healthcare Courier Assessment</h1>
            <div class="subtitle">Thanks for booking — tell us about your delivery needs so we can prepare.</div>
          </div>
        </div>
      </div>

      <div class="step-counter" aria-hidden="true">
        <div class="small-muted">Step <strong id="stepCurrent">1</strong> of <strong id="stepTotal">8</strong></div>
      </div>
    </header>

    <main class="main">
      <div class="progress-row" aria-hidden="true">
        <div class="prog-wrap" aria-hidden="true"><div class="prog-bar" id="progressBar"></div></div>
        <div class="prog-percent" id="progressPercent">0%</div>
      </div>

      <form id="assessmentForm" autocomplete="on" novalidate>
       <!-- STEP 1 -->
<section class="step active" data-step="1" aria-label="General Company Profile">
  <div class="section-head">
    <div class="icon" aria-hidden="true">
      <!-- truck icon -->
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
        <path d="M3 13h11v6H3zM16 15h3l2-3v-4h-5v7zM5 7h8v6H5z" 
              stroke="currentColor" stroke-width="1.2" 
              stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
    <h2>General Company Profile</h2>
  </div>

  <div class="field">
    <label class="field-label" for="name">Full name <span style="color:red">*</span></label>
    <input id="name" name="name" type="text" placeholder="Jane Doe" required />
  </div>

  <div class="field">
    <label class="field-label" for="email">Email (same appointment email) <span style="color:red">*</span></label>
    <div class="input-wrap">
      <input id="email" name="email" type="email" placeholder="name@company.com" required />
      <div class="input-icon" aria-hidden="true">
        <!-- mail icon -->
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <path d="M3 8l9 6 9-6" stroke="currentColor" stroke-width="1.4"
                stroke-linecap="round" stroke-linejoin="round"/>
          <rect x="3" y="5" width="18" height="14" rx="2" 
                stroke="currentColor" stroke-width="1.2"/>
        </svg>
      </div>
    </div>
  </div>

  <!-- NEW: Company Name -->
  <div class="field">
    <label class="field-label" for="company">Company name <span style="color:red">*</span></label>
    <input id="company" name="company" type="text" placeholder="ABC Healthcare Inc." required />
  </div>

  <!-- NEW: Job Title -->
  <div class="field">
    <label class="field-label" for="jobTitle">Job title <span style="color:red">*</span></label>
    <input id="jobTitle" name="jobTitle" type="text" placeholder="Operations Manager" required />
  </div>

  <div class="field">
    <label class="field-label" for="products">What type of pharmaceuticals and medical products will require delivery?</label>
    <textarea id="products" name="products" placeholder="e.g., vaccines, biologics, ancillary supplies"></textarea>
  </div>

  <div class="field">
    <label class="field-label" for="process">What is your current delivery process, and what challenges are you facing with your existing courier partner?</label>
    <textarea id="process" name="process" placeholder="Describe your pickup → delivery flow and pain points"></textarea>
  </div>

  <div class="field">
    <label class="field-label" for="volumes">Average daily/weekly/monthly delivery volumes expected</label>
    <div class="input-wrap">
      <input id="volumes" name="volumes" type="text" placeholder="e.g., 50 per day or 200 per month" />
      <div class="input-icon" aria-hidden="true">
        <!-- chart icon -->
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <path d="M3 3v18h18" stroke="currentColor" stroke-width="1.2"
                stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M7 13v5M12 8v10M17 5v13" stroke="currentColor" stroke-width="1.6"
                stroke-linecap="round"/>
        </svg>
      </div>
    </div>
  </div>
</section>

<!-- STEP 2 -->
<section class="step" data-step="2" aria-label="Service Expectations">
  <div class="section-head">
    <div class="icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2v6M6 8h12" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
    <h2>Service Expectations</h2>
  </div>

  <div class="field">
    <label class="field-label">Service-level requirements</label>
    <div class="options" role="radiogroup" aria-label="SLA">
      <label class="option"><input type="radio" name="sla" value="STAT within 2 hours"/><span>STAT within 2 hours</span></label>
      <label class="option"><input type="radio" name="sla" value="Same-day"/><span>Same-day</span></label>
      <label class="option"><input type="radio" name="sla" value="Next-day"/><span>Next-day</span></label>
    </div>
  </div>

  <div class="field">
    <label class="field-label">Scheduled routes, on-demand/STAT, or both?</label>
    <div class="options" role="group" aria-label="Service types">
      <div class="option"><input type="checkbox" id="svc1" name="serviceTypes" value="Scheduled routes"/><label for="svc1">Scheduled routes</label></div>
      <div class="option"><input type="checkbox" id="svc2" name="serviceTypes" value="On-demand/STAT"/><label for="svc2">On-demand / STAT</label></div>
      <div class="option"><input type="checkbox" id="svc3" name="serviceTypes" value="Both"/><label for="svc3">Both</label></div>
    </div>
  </div>

  <div class="field">
    <label class="field-label">Geographic coverage</label>
    <div class="options" role="group" aria-label="Geography">
      <div class="option"><input type="checkbox" id="geo1" name="geography" value="Local"/><label for="geo1">Local</label></div>
      <div class="option"><input type="checkbox" id="geo2" name="geography" value="Statewide"/><label for="geo2">Statewide</label></div>
      <div class="option"><input type="checkbox" id="geo3" name="geography" value="Multi-state"/><label for="geo3">Multi-state</label></div>
    </div>
  </div>

  <div class="field">
    <label class="field-label">24/7/365 availability (incl. weekends/holidays)?</label>
    <div class="pills" role="radiogroup" aria-label="24/7 availability" id="pills_avail">
      <label class="pill"><input type="radio" name="availability247" value="Yes"/><span>Yes</span></label>
      <label class="pill"><input type="radio" name="availability247" value="No"/><span>No</span></label>
    </div>
  </div>
</section>

<!-- STEP 3 -->
<section class="step" data-step="3" aria-label="Compliance & Regulatory">
  <div class="section-head">
    <div class="icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2v6M5 22h14" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
    <h2>Compliance & Regulatory Requirements</h2>
  </div>

  <div class="field">
    <label class="field-label">Schedule II–V controlled substances (DEA)?</label>
    <div class="pills" role="radiogroup">
      <label class="pill"><input type="radio" name="controlledSubstances" value="Yes"/><span>Yes</span></label>
      <label class="pill"><input type="radio" name="controlledSubstances" value="No"/><span>No</span></label>
    </div>
  </div>

  <div class="field">
    <label class="field-label">Temperature-sensitive shipments?</label>
    <div class="pills" role="radiogroup">
      <label class="pill"><input type="radio" name="temperatureSensitive" value="Yes"/><span>Yes</span></label>
      <label class="pill"><input type="radio" name="temperatureSensitive" value="No"/><span>No</span></label>
    </div>
    <input type="text" name="temperatureRanges" placeholder="If yes, ranges (e.g., 2–8°C; -20°C)"/>
  </div>

  <div class="field">
    <label class="field-label">Required documentation / permits</label>
    <div class="options" role="group">
      <div class="option"><input type="checkbox" id="doc1" name="documentation" value="HIPAA"/><label for="doc1">HIPAA</label></div>
      <div class="option"><input type="checkbox" id="doc2" name="documentation" value="DOT"/><label for="doc2">DOT</label></div>
      <div class="option"><input type="checkbox" id="doc3" name="documentation" value="OSHA"/><label for="doc3">OSHA</label></div>
      <div class="option"><input type="checkbox" id="doc4" name="documentation" value="DEA chain-of-custody"/><label for="doc4">DEA chain-of-custody</label></div>
    </div>
    <textarea name="documentationOther" placeholder="Other documentation / notes (optional)"></textarea>
  </div>

  <div class="field">
    <label class="field-label">Require background checks or special clearances?</label>
    <div class="pills" role="radiogroup">
      <label class="pill"><input type="radio" name="securityClearances" value="Yes"/><span>Yes</span></label>
      <label class="pill"><input type="radio" name="securityClearances" value="No"/><span>No</span></label>
    </div>
  </div>
</section>

<!-- STEP 5 -->
<section class="step" data-step="5" aria-label="Technology & Tracking">
  <div class="section-head">
    <div class="icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 12h18M3 6h18M3 18h12" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
    <h2>Technology & Tracking</h2>
  </div>

  <div class="field">
    <label class="field-label">Level of visibility required</label>
    <div class="options">
      <div class="option"><input type="checkbox" id="vis1" name="visibility" value="GPS tracking"/><label for="vis1">GPS tracking</label></div>
      <div class="option"><input type="checkbox" id="vis2" name="visibility" value="Proof of Delivery"/><label for="vis2">Proof of Delivery</label></div>
      <div class="option"><input type="checkbox" id="vis3" name="visibility" value="Client portal"/><label for="vis3">Client portal</label></div>
    </div>
  </div>

  <div class="field">
    <label class="field-label">Integration with pharmacy management / EHR?</label>
    <div class="pills" role="radiogroup">
      <label class="pill"><input type="radio" name="ehrIntegration" value="Yes"/><span>Yes</span></label>
      <label class="pill"><input type="radio" name="ehrIntegration" value="No"/><span>No</span></label>
    </div>
    <input type="text" name="ehrSystem" placeholder="If yes, specify system (optional)" />
  </div>

  <div class="field">
    <label class="field-label">Confirmations required</label>
    <div class="options">
      <div class="option"><input type="checkbox" id="conf1" name="confirmations" value="E-signatures"/><label for="conf1">E-signatures</label></div>
      <div class="option"><input type="checkbox" id="conf2" name="confirmations" value="Timestamps"/><label for="conf2">Timestamps</label></div>
      <div class="option"><input type="checkbox" id="conf3" name="confirmations" value="Temperature logs"/><label for="conf3">Temperature logs</label></div>
      <div class="option"><input type="checkbox" id="conf4" name="confirmations" value="Photo verification"/><label for="conf4">Photo verification</label></div>
    </div>
  </div>
</section>

<!-- STEP 6 -->
<section class="step" data-step="6" aria-label="Security & Risk Management">
  <div class="section-head">
    <div class="icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2l7 4v6c0 5-7 10-7 10s-7-5-7-10V6l7-4z" stroke="currentColor" stroke-width="1.1" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
    <h2>Security & Risk Management</h2>
  </div>

  <div class="field">
    <label class="field-label">Security materials required</label>
    <div class="options">
      <div class="option"><input type="checkbox" id="sec1" name="securityMaterials" value="Tamper-evident seals"/><label for="sec1">Tamper-evident seals</label></div>
      <div class="option"><input type="checkbox" id="sec2" name="securityMaterials" value="Locked bags"/><label for="sec2">Locked bags</label></div>
      <div class="option"><input type="checkbox" id="sec3" name="securityMaterials" value="Secure vault storage"/><label for="sec3">Secure vault storage</label></div>
    </div>
  </div>

  <div class="field">
    <label class="field-label">Insurance requirement (per shipment)</label>
    <input type="number" name="insuranceRequirement" placeholder="Enter numeric value (e.g., 50000)" />
  </div>

  <div class="field">
    <label class="field-label">How should incidents be handled and reported?</label>
    <textarea name="incidentHandling" placeholder="Describe incident procedures (optional)"></textarea>
  </div>
</section>

<!-- STEP 7 -->
<section class="step" data-step="7" aria-label="Communication & Relationship">
  <div class="section-head">
    <div class="icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M21 15v4a1 1 0 0 1-1 1H6l-5 3V6a1 1 0 0 1 1-1h16" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
    <h2>Communication & Relationship</h2>
  </div>

  <div class="field">
    <label class="field-label">Preferred method of communication</label>
    <div class="options">
      <div class="option"><input type="checkbox" id="comm1" name="preferredCommunication" value="Dispatch line"/><label for="comm1">Dispatch line</label></div>
      <div class="option"><input type="checkbox" id="comm2" name="preferredCommunication" value="Email"/><label for="comm2">Email</label></div>
      <div class="option"><input type="checkbox" id="comm3" name="preferredCommunication" value="Portal alerts"/><label for="comm3">Portal alerts</label></div>
      <div class="option"><input type="checkbox" id="comm4" name="preferredCommunication" value="SMS"/><label for="comm4">SMS</label></div>
    </div>
  </div>

  <div class="field">
    <label class="field-label">Require a dedicated account manager?</label>
    <div class="pills">
      <label class="pill"><input type="radio" name="dedicatedManager" value="Yes"/><span>Yes</span></label>
      <label class="pill"><input type="radio" name="dedicatedManager" value="No"/><span>No</span></label>
    </div>
  </div>

  <div class="field">
    <label class="field-label">Service review frequency</label>
    <select name="reviewFrequency">
      <option value="">(choose)</option>
      <option>Weekly</option>
      <option>Monthly</option>
      <option>Quarterly</option>
      <option>Annually</option>
    </select>
  </div>
</section>

<!-- STEP 8 -->
<section class="step" data-step="8" aria-label="Contract & Pricing">
  <div class="section-head">
    <div class="icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2v20M3 7h18" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
    <h2>Contract & Pricing</h2>
  </div>

  <div class="field">
    <label class="field-label">Preferred pricing model</label>
    <select name="pricingModel">
      <option value="">(choose)</option>
      <option>Per-trip</option>
      <option>Per-mile</option>
      <option>Per-route</option>
      <option>Flat monthly</option>
    </select>
  </div>

  <div class="field">
    <label class="field-label">Seasonal fluctuations / surge periods?</label>
    <div class="pills">
      <label class="pill"><input type="radio" name="seasonalSurge" value="Yes"/><span>Yes</span></label>
      <label class="pill"><input type="radio" name="seasonalSurge" value="No"/><span>No</span></label>
    </div>
    <textarea name="seasonalSurgeDetails" placeholder="If yes, explain (optional)"></textarea>
  </div>

  <div class="field">
    <label class="field-label">KPIs that matter most</label>
    <div class="options">
      <div class="option"><input type="checkbox" id="kpi1" name="kpis" value="On-time %"/><label for="kpi1">On-time %</label></div>
      <div class="option"><input type="checkbox" id="kpi2" name="kpis" value="Temperature compliance"/><label for="kpi2">Temperature compliance</label></div>
      <div class="option"><input type="checkbox" id="kpi3" name="kpis" value="Accuracy rate"/><label for="kpi3">Accuracy rate</label></div>
    </div>
  </div>
</section>

        <!-- Footer actions -->
        <div class="footer" role="region" aria-label="Form navigation">
          <div class="actions-left">
            <button type="button" class="btn ghost" id="prevBtn" aria-label="Previous">Previous</button>
            <div class="small-muted" id="statusMsg" aria-live="polite" style="min-width:140px;text-align:left"></div>
          </div>

          <div style="display:flex;gap:10px;align-items:center">
            <button type="button" class="btn primary" id="nextBtn" aria-label="Next">Next</button>
          </div>
        </div>
      </form>
    </main>
  </div>

  <!-- overlay success -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="success-card" role="dialog" aria-modal="true" aria-labelledby="successTitle">
      <div style="font-size:36px">✅</div>
      <h3 id="successTitle">Thanks — appointment confirmed!</h3>
      <p id="successDetail">We received your assessment and will follow up soon.</p>
      <div style="display:flex;gap:10px;justify-content:center;margin-top:14px">
        <button id="overlayClose" class="btn ghost">Close</button>
        <button id="overlayRestart" class="btn primary">Start again</button>
      </div>
    </div>
  </div>

  <!-- minimal toasts container -->
  <div class="toasts" id="toasts" aria-live="polite"></div>

  <!-- confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

 <script>
  // ---------- CONFIG ----------
  const WEBHOOK_URL = 'https://hook.us2.make.com/t6klvz5sg4pq12hysqs7xbbdhhtz5rxt';
  const TOTAL_STEPS = 8;
  // ----------------------------

  // small helpers
  const $ = s => document.querySelector(s);
  const $$ = s => Array.from(document.querySelectorAll(s));
  const pushToast = (txt, t=2800) => {
    const c = document.getElementById('toasts');
    const el = document.createElement('div'); el.className = 'toast'; el.textContent = txt;
    c.appendChild(el); setTimeout(()=> el.remove(), t);
  };

  // pill click behavior
  function wirePills(){
    document.querySelectorAll('.pill').forEach(p => {
      const input = p.querySelector('input');
      p.addEventListener('click', ()=>{
        if (input) input.checked = true;
        const name = input?.name;
        if (name){
          document.querySelectorAll('.pill input[name="'+name+'"]').forEach(i=>{
            i.closest('.pill').classList.toggle('active', i.checked);
          });
        } else {
          p.classList.toggle('active');
        }
      });
    });
  }

  // option-card behavior
function wireOptionCards(){
  document.querySelectorAll('.option').forEach(opt=>{
    opt.addEventListener('click', e=>{
      const inp = opt.querySelector('input');
      if (!inp) return;
      if (inp.type === 'checkbox') {
        inp.checked = !inp.checked;
        opt.classList.toggle('active', inp.checked);
      } else if (inp.type === 'radio') {
        const name = inp.name;
        document.querySelectorAll('input[type="radio"][name="'+name+'"]').forEach(r=>{
          r.checked = false;
          r.closest('.option')?.classList.remove('active');
        });
        inp.checked = true;
        opt.classList.add('active');
      }
    });
  });
}

  // initialize
  document.addEventListener('DOMContentLoaded', ()=>{
    wirePills();
    wireOptionCards();

    const steps = $$('.step');
    const prevBtn = $('#prevBtn');
    const nextBtn = $('#nextBtn');
    const progressBar = $('#progressBar');
    const progressPercent = $('#progressPercent');
    const stepCurrent = $('#stepCurrent');
    const stepTotal = $('#stepTotal');
    const statusMsg = $('#statusMsg');
    const overlay = $('#overlay');
    const overlayClose = $('#overlayClose');
    const overlayRestart = $('#overlayRestart');
    const form = $('#assessmentForm');

    let index = 0;
    stepTotal.textContent = TOTAL_STEPS;

    function showStep(i){
      index = Math.max(0, Math.min(TOTAL_STEPS-1, i));
      steps.forEach((s, idx)=> s.classList.toggle('active', idx === index));
      prevBtn.style.display = index === 0 ? 'none' : 'inline-flex';
      nextBtn.textContent = index === (TOTAL_STEPS-1) ? 'Submit' : 'Next';
      const pct = Math.round(((index+1)/TOTAL_STEPS)*100);
      progressBar.style.width = `${pct}%`;
      progressPercent.textContent = `${pct}%`;
      stepCurrent.textContent = index+1;
      statusMsg.textContent = '';
      const f = steps[index].querySelector('input, textarea, select');
      if (f) f.focus({preventScroll:true});
      document.querySelectorAll('.pill input').forEach(i=>{
        i.closest('.pill').classList.toggle('active', i.checked);
      });
    }

    showStep(0);

    prevBtn.addEventListener('click', ()=> showStep(index-1));

    nextBtn.addEventListener('click', async ()=>{
      // ---- validation for Step 1 ----
      if (index === 0) {
        const name = form.querySelector('[name="name"]')?.value?.trim() || '';
        const email = form.querySelector('[name="email"]')?.value?.trim() || '';
        const company = form.querySelector('[name="company"]')?.value?.trim() || '';
        const jobTitle = form.querySelector('[name="jobTitle"]')?.value?.trim() || '';

        if (!name || !validateEmail(email) || !company || !jobTitle) {
          pushToast('Please complete all required fields on Step 1.');
          return;
        }
      }
      // --------------------------------

      if (index < TOTAL_STEPS-1){
        showStep(index+1);
        return;
      }

      // final submit safeguard
      const name = form.querySelector('[name="name"]')?.value?.trim() || '';
      const email = form.querySelector('[name="email"]')?.value?.trim() || '';
      if (!name || !validateEmail(email)){
        pushToast('Please enter a valid name and email.');
        showStep(0);
        return;
      }

      nextBtn.disabled = true;
      nextBtn.textContent = 'Submitting...';
      statusMsg.textContent = 'Submitting…';

      const payload = gatherFormObject(form);

      try{
        const res = await submitJSON(WEBHOOK_URL, payload);
        if (res && res.ok){
          onSuccess(false);
          return;
        }
        const res2 = await submitFormEncoded(WEBHOOK_URL, payload);
        if (res2 && res2.ok){
          onSuccess(false);
          return;
        }
        const res3 = await submitNoCors(WEBHOOK_URL, payload);
        if (res3){
          onSuccess(true);
          return;
        }
        throw new Error('All submit attempts failed');
      }catch(err){
        console.error('Submit error (safe):', err && err.message ? err.message : err);
        pushToast('Submission failed — please try again.');
        statusMsg.textContent = 'Submission failed';
        nextBtn.disabled = false;
        nextBtn.textContent = 'Submit';
      }
    });

    overlayClose.addEventListener('click', ()=>{
      overlay.classList.remove('active');
      overlay.setAttribute('aria-hidden','true');
    });
    overlayRestart.addEventListener('click', ()=>{
      overlay.classList.remove('active');
      overlay.setAttribute('aria-hidden','true');
      resetFormAndState();
    });

    form.addEventListener('keydown', e=>{
      if (e.key === 'Enter' && e.target.tagName !== 'TEXTAREA') e.preventDefault();
    });

    // helper functions
    function validateEmail(e){
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);
    }

    // ✅ merge multiple values into comma-separated strings
    function gatherFormObject(formEl){
      const fd = new FormData(formEl);
      const obj = {};
      for (const [k,v] of fd.entries()){
        if (obj.hasOwnProperty(k)){
          obj[k] = Array.isArray(obj[k]) ? [...obj[k], v] : [obj[k], v];
        } else {
          obj[k] = v;
        }
      }
      Object.keys(obj).forEach(key=>{
        if (Array.isArray(obj[key])) {
          obj[key] = obj[key].join(', ');
        }
      });
      obj.source = 'healthcare-courier-assessment';
      obj.timestamp = new Date().toISOString();
      return obj;
    }

    async function submitJSON(url, data){
      try{
        return await fetch(url, {
          method:'POST',
          headers:{ 'Content-Type':'application/json' },
          body: JSON.stringify(data),
          keepalive: true
        });
      }catch(e){ return null; }
    }

    async function submitFormEncoded(url, data){
      try{
        const params = new URLSearchParams();
        Object.entries(data).forEach(([k,v])=>{
          if (v !== undefined && v !== null) params.append(k, String(v));
        });
        return await fetch(url, {
          method:'POST',
          headers:{ 'Content-Type':'application/x-www-form-urlencoded' },
          body: params.toString(),
          keepalive: true
        });
      }catch(e){ return null; }
    }

    async function submitNoCors(url, data){
      try{
        await fetch(url, {
          method:'POST',
          mode:'no-cors',
          body: JSON.stringify(data),
          keepalive: true
        });
        return true;
      }catch(e){ return null; }
    }

    function onSuccess(noCorsFallback){
      nextBtn.disabled = false;
      nextBtn.textContent = 'Submitted';
      $('#statusMsg').textContent = 'Submitted';
      resetFormAndState();
      $('#successDetail').textContent = noCorsFallback
        ? 'We sent your responses using a best-effort fallback. If you don’t get a confirmation, please contact support.'
        : 'We received your assessment and will follow up within 1 business day.';
      overlay.classList.add('active');
      overlay.setAttribute('aria-hidden','false');
      pushToast('Submitted — thank you!');
    }

    function resetFormAndState(){
      form.reset();
      document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
      showStep(0);
      $('#statusMsg').textContent = '';
    }

    $$('.pill input').forEach(inp=>{
      if (inp.checked) inp.closest('.pill')?.classList.add('active');
    });

    // ✅ auto-fill name & email from query parameters
    const params = new URLSearchParams(window.location.search);
    const prefillName = params.get("name");
    const prefillEmail = params.get("email");

    if (prefillName) {
      const nameField = document.querySelector('[name="name"]');
      if (nameField) {
        nameField.value = decodeURIComponent(prefillName.replace(/\+/g, " "));
        nameField.readOnly = true;
      }
    }

    if (prefillEmail) {
      const emailField = document.querySelector('[name="email"]');
      if (emailField) {
        emailField.value = decodeURIComponent(prefillEmail.replace(/\+/g, " "));
        emailField.readOnly = true;
      }
    }
  }); // DOMContentLoaded

  (function guardConsole(){ const o = console.log; console.log = function(){}; })();
</script>

</body>
</html>




